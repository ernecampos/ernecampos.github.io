{% assign collaborators = site.data.data.collaborators %}
{% assign collaborators_title = site.data.data.collaborators_title | default: "Main collaborators" %}

{% if collaborators %}
<section class="section collaborators-section">

  <h2 class="section-title">
    <span class="fa-stack fa-xs">
      <i class="fas fa-circle fa-stack-2x"></i>
      <i class="fas fa-handshake fa-stack-1x fa-inverse"></i>
    </span>
    {{ collaborators_title }}
  </h2>

  {% comment %}
    Optional intro text support (mirrors publications.intro pattern).
    If you add `collaborators_intro:` to _data/data.yml, it will render here.
  {% endcomment %}
  {% if site.data.data.collaborators_intro %}
  <div class="intro">
    {{ site.data.data.collaborators_intro | markdownify }}
  </div><!--//intro-->
  {% endif %}

  {% for p in collaborators %}
  <div class="item">
    {% if p.url %}
      <li><a href="{{ p.url }}">{{ p.name }}</a></li>
    {% else %}
      <li>{{ p.name }}</li>
    {% endif %}

    {% comment %}
      Keep these class names parallel to publications:
      - publication-authors  -> collaborator-role
      - publication-conference -> collaborator-org
      This preserves your themeâ€™s spacing/typography behavior inside .item blocks.
    {% endcomment %}
    <div class="collaborator-role">
      {% if p.role %}{{ p.role }}{% endif %}
      {% if p.role and p.org %} &middot; {% endif %}
      {% if p.org %}{{ p.org }}{% endif %}
    </div>

    {% if p.avatar %}
      <div class="collaborator-avatar">
        <img src="{{ p.avatar | relative_url }}" alt="{{ p.name }} avatar" class="avatar">
      </div>
    {% endif %}
  </div><!--//item-->
  {% endfor %}

</section><!--//section-->
{% endif %}
